<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">Programarile Mele</h1>

  <div class="mb-6 flex gap-4">
    <input
      type="email"
      [(ngModel)]="email"
      placeholder="Introduceti email-ul"
      pInputText
      class="flex-1"
      (keyup.enter)="searchAppointments()"
    />
    <p-button
      label="Cauta"
      icon="pi pi-search"
      (onClick)="searchAppointments()"
      [loading]="loading"
    ></p-button>
  </div>

  <div
    *ngIf="searched && appointments.length === 0 && !loading"
    class="text-center p-6 bg-gray-100 rounded"
  >
    <p class="text-gray-600">Nu au fost gasite programari pentru acest email.</p>
  </div>

  <p-table
    *ngIf="appointments.length > 0"
    [value]="appointments"
    [tableStyle]="{ 'min-width': '50rem' }"
    styleClass="p-datatable-striped"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Titlu</th>
        <th>Data si Ora</th>
        <th>Tip Serviciu</th>
        <th>Status</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-appointment>
      <tr>
        <td>{{ appointment.title }}</td>
        <td>{{ appointment.appointmentTime | date : 'dd/MM/yyyy HH:mm' }}</td>
        <td>{{ appointment.serviceType }}</td>
        <td>
          <span [class]="'badge ' + getStatusClass(appointment.status)">
            {{ appointment.status }}
          </span>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
